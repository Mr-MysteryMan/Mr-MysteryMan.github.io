<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>面向对象课程Unit4总结 | ENIGMA</title><meta name="author" content="Mr-MysteryMan"><meta name="copyright" content="Mr-MysteryMan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="前言第四单元作业的主题是图书管理系统的构建，主要学习内容涉及到程序架构设计以及UML图的阅读与绘制。第一次作业主要实现基本的图书管理系统，服务单元主要是书架、借阅处、预约处，仅含有正式书籍，顾客可以获得borrow、return、query、order和pick等服务，同时绘制程序的UML类图；第二次作业增加了图书漂流角服务单元（CornerOffice漂流角类），含有正式与非正式书籍（非正式书籍">
<meta property="og:type" content="article">
<meta property="og:title" content="面向对象课程Unit4总结">
<meta property="og:url" content="http://example.com/2025/02/10/OO/2024%E6%98%A5-OO%E8%AF%BE%E7%A8%8BUnit4%E6%80%BB%E7%BB%93/index.html">
<meta property="og:site_name" content="ENIGMA">
<meta property="og:description" content="前言第四单元作业的主题是图书管理系统的构建，主要学习内容涉及到程序架构设计以及UML图的阅读与绘制。第一次作业主要实现基本的图书管理系统，服务单元主要是书架、借阅处、预约处，仅含有正式书籍，顾客可以获得borrow、return、query、order和pick等服务，同时绘制程序的UML类图；第二次作业增加了图书漂流角服务单元（CornerOffice漂流角类），含有正式与非正式书籍（非正式书籍">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/wuhui/10.png">
<meta property="article:published_time" content="2025-02-10T06:00:00.000Z">
<meta property="article:modified_time" content="2025-03-21T13:18:09.104Z">
<meta property="article:author" content="Mr-MysteryMan">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/wuhui/10.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "面向对象课程Unit4总结",
  "url": "http://example.com/2025/02/10/OO/2024%E6%98%A5-OO%E8%AF%BE%E7%A8%8BUnit4%E6%80%BB%E7%BB%93/",
  "image": "http://example.com/img/wuhui/10.png",
  "datePublished": "2025-02-10T06:00:00.000Z",
  "dateModified": "2025-03-21T13:18:09.104Z",
  "author": [
    {
      "@type": "Person",
      "name": "Mr-MysteryMan",
      "url": "http://example.com/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/logo.png"><link rel="canonical" href="http://example.com/2025/02/10/OO/2024%E6%98%A5-OO%E8%AF%BE%E7%A8%8BUnit4%E6%80%BB%E7%BB%93/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '面向对象课程Unit4总结',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/post-background.css"><link rel="stylesheet" href="/css/flipcountdown.css"><link rel="stylesheet" href="/css/nav_adjust.css"><script src="https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js"></script><meta name="generator" content="Hexo 7.3.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (false) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><script>window.paceOptions = {
  restartOnPushState: false
}

btf.addGlobalFn('pjaxSend', () => {
  Pace.restart()
}, 'pace_restart')

</script><link rel="stylesheet" href="/css/progress_bar.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg" style="background-color: #efefef;"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading.gif" data-original="/img/avatar.png" onerror="this.onerror=null;this.src='/img/logo.png'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/charts/"><i class="fa-fw fas fa-list"></i><span> 统计</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(/img/wuhui/10.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">ENIGMA</span></a><a class="nav-page-title" href="/"><span class="site-name">面向对象课程Unit4总结</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/charts/"><i class="fa-fw fas fa-list"></i><span> 统计</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">面向对象课程Unit4总结</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-02-10T06:00:00.000Z" title="发表于 2025-02-10 14:00:00">2025-02-10</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-03-21T13:18:09.104Z" title="更新于 2025-03-21 21:18:09">2025-03-21</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/">面向对象</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">5.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>17分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>第四单元作业的主题是图书管理系统的构建，主要学习内容涉及到程序架构设计以及<code>UML</code>图的阅读与绘制。第一次作业主要实现基本的图书管理系统，服务单元主要是书架、借阅处、预约处，仅含有正式书籍，顾客可以获得<code>borrow</code>、<code>return</code>、<code>query</code>、<code>order</code>和<code>pick</code>等服务，同时绘制程序的<code>UML</code>类图；第二次作业增加了图书漂流角服务单元（<code>CornerOffice</code>漂流角类），含有正式与非正式书籍（非正式书籍可以转正），顾客可以获得<code>donate</code>、<code>renew</code>等服务，同时绘制程序的<code>UML</code>类图以及书籍借阅流程的<code>UML</code>状态图；第三次作业增加了信誉积分，顾客可以查询自身信誉积分，借书还书的过程中各种情况会导致客户信誉积分变化，同时绘制程序的<code>UML</code>类图以及书籍预约获取流程的<code>UML</code>顺序图。第四单元并未明确规定代码的架构以及书籍的移动策略，自由度较高，主要练习了程序代码架构高内聚低耦合以及逻辑合理清晰的设计。各种<code>UML</code>图的绘制较为繁琐，反而是本单元中耗时最长的部分。本篇总结主要是记录一下三次作业的具体实现、各种优缺点分析，以及自身一点心得体会。</p>
<h2 id="一、作业架构分析"><a href="#一、作业架构分析" class="headerlink" title="一、作业架构分析"></a>一、作业架构分析</h2><h3 id="Homework1"><a href="#Homework1" class="headerlink" title="Homework1"></a>Homework1</h3><h4 id="题目重点重述"><a href="#题目重点重述" class="headerlink" title="题目重点重述"></a>题目重点重述</h4><p>第一次作业主要是实现简单的图书管理系统，包含<code>borrow</code>、<code>return</code>、<code>query</code>、<code>order</code>和<code>pick</code>等顾客操作，以及图书馆在开馆闭馆时自行进行的调整操作。图书馆分区可分为三区，书架区、借阅处、预约处。当顾客进行借阅操作时，携带书籍前往借阅处，借阅处审批顾客是否可以借阅，若可以，则借与顾客，如不可以，则存入借阅处。归还书籍时同理，归还的书籍存入借阅处。当顾客进行查询操作时，书架区需要返回特定书籍编号的库存数量。当顾客进行预约操作时，预约处审批顾客是否可以预约，并在停止营业后进行书籍调整。当顾客进行取预约书籍操作时，预约处需要查询是否有预约信息，若存在，则进行借出。开馆闭馆停止营业时可以进行书籍在图书馆内调整操作，在三个分区转运书籍。书籍分为ABC三类，其中，A类书籍不可以借阅或预约（不可以移动），B类书籍同时只能拥有一本，C类书籍同一书号同时只能拥有一本。</p>
<h4 id="程序UML图"><a href="#程序UML图" class="headerlink" title="程序UML图"></a>程序UML图</h4><p><img src="/img/loading.gif" data-original="/images/OO/oo第4单元总结/hw4-1UML图.png" alt="hw4-1UML图"></p>
<p>本次作业中使用<code>RequestDealer</code>类读入并处理需求<code>LibraryRequest</code>，主要功能实现类是<code>Library</code>类，主要交互是在<code>Library</code>和<code>Customer</code>类之间进行。在<code>Library</code>中存入客户名单，以及<code>Shelf</code>、<code>BorrowOffice</code>、<code>AppointOffice</code>三个服务分区，在<code>Library</code>类中进行上层的统一操作。同时设计了<code>BookBuffer</code>类统一存储当前对象的书籍，并配有查询特定书籍数量、是否拥有特定书籍和增删书籍的基本操作。对于预约处的处理，使用预约信息<code>AppointInf</code>作为最小操作单元，每条预约信息均有<code>bookId</code>、<code>customer</code>、<code>date</code>等属性，以判断预约信息的有效性。</p>
<h4 id="复杂度"><a href="#复杂度" class="headerlink" title="复杂度"></a>复杂度</h4><p>类复杂度表格如图所示：其中<code>OCavg</code>指代平均操作复杂度，<code>OCmax</code> 指代最大操作复杂度，<code>WMC</code> 指代加权方法复杂度</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Class</th>
<th>OCavg</th>
<th>OCmax</th>
<th>WMC</th>
</tr>
</thead>
<tbody>
<tr>
<td>AppointInf</td>
<td>1</td>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td>AppointOffice</td>
<td>2</td>
<td>4</td>
<td>14</td>
</tr>
<tr>
<td>BookBuffer</td>
<td>1.88</td>
<td>3</td>
<td><strong>15</strong></td>
</tr>
<tr>
<td>BorrowOffice</td>
<td>1</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>Customer</td>
<td>1.6</td>
<td>4</td>
<td>8</td>
</tr>
<tr>
<td>Library</td>
<td><strong>2.1</strong></td>
<td><strong>5</strong></td>
<td><strong>21</strong></td>
</tr>
<tr>
<td>Main</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>RequestDealer</td>
<td><strong>2.8</strong></td>
<td><strong>6</strong></td>
<td>14</td>
</tr>
<tr>
<td>Shelf</td>
<td>1</td>
<td>1</td>
<td>6</td>
</tr>
</tbody>
</table>
</div>
<p>可以观察到，本次作业设计架构还是较为合理的，整体复杂度水平较低。复杂度最高的是<code>RequestDeal</code>和<code>Library</code>类。这两个类中含有多种方法，且存在多项的分支选择，因此复杂度较高。同时，由于各项客户操作以及书籍转运主要在<code>Library</code>中实现，因此会出现<code>Library</code>复杂度远超其他类的现象。<code>Customer</code>、<code>Shelf</code>、<code>BorrowOffice</code>中方法均是对<code>bookBuffer</code>操作，主体部分在<code>BookBuffer</code>类中实现，因此复杂度较低。</p>
<h4 id="重构"><a href="#重构" class="headerlink" title="重构"></a>重构</h4><p>在重新思考后，发现不将书籍副本实例化为具体对象，将会遗失很多信息（将书本实例化后会更好存储），同时会造成三种<code>Office</code>较难抽象，因此选择进行重构。</p>
<p><img src="/img/loading.gif" data-original="/images/OO/oo第4单元总结/hw4-1UML图改.png" alt="hw4-1UML图改"></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Class</th>
<th>OCavg</th>
<th>OCmax</th>
<th>WMC</th>
</tr>
</thead>
<tbody>
<tr>
<td>AppointInf</td>
<td>1</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td>AppointOffice</td>
<td>1</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td>Book</td>
<td>1</td>
<td>1</td>
<td>6</td>
</tr>
<tr>
<td>BookBuffer</td>
<td><strong>2.64</strong></td>
<td><strong>6</strong></td>
<td><strong>29</strong></td>
</tr>
<tr>
<td>BorrowOffice</td>
<td>1</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>Customer</td>
<td>1.5</td>
<td>4</td>
<td>9</td>
</tr>
<tr>
<td>Library</td>
<td>1.9</td>
<td>4</td>
<td><strong>19</strong></td>
</tr>
<tr>
<td>Main</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Office</td>
<td>1</td>
<td>1</td>
<td>6</td>
</tr>
<tr>
<td>RequestDealer</td>
<td><strong>2.8</strong></td>
<td><strong>6</strong></td>
<td>14</td>
</tr>
<tr>
<td>ShelfOffice</td>
<td>1</td>
<td>1</td>
<td>4</td>
</tr>
</tbody>
</table>
</div>
<p>可以观察到，类复杂度略有上升。但是由于<code>Book</code>类中可以存储是否预约以及预约信息，因此可以将图书馆中<code>appointOffice</code>、<code>borrowOffice</code>、<code>shelfOffice</code>抽象出一个<code>Office</code>的父类，使得代码复用性更高，操作也更加顺遂。</p>
<h3 id="Homework2"><a href="#Homework2" class="headerlink" title="Homework2"></a>Homework2</h3><h4 id="题目重点重述-1"><a href="#题目重点重述-1" class="headerlink" title="题目重点重述"></a>题目重点重述</h4><p>本次作业在第一次作业基础上，新增了客户捐献、图书漂流角、正式书籍续借等功能。首先定义了正式书籍与非正式书籍，正式书籍可从初始化配置（存储于书架中）以及非正式书籍升级获得（非正式书籍被借阅两次，需要升级为正式书籍），仅存在于书架、预约处、借阅处、客户；非正式书籍可从捐献获得（存储于图书漂流角中），仅存在于图书漂流角、借阅处、客户。书籍的转移路径为书架到借阅处（正式书籍借阅失败）、书架到客户（正式书籍借阅成功）、书架到预约处（正式书籍预约整理）、借阅处到书架（正式书籍返还及非正式书籍升级）、借阅处到图书漂流角（非正式书籍返还）、预约处到书架（预约书籍超时未取返还）、预约处到客户（预约书籍取走）、图书漂流角到借阅处（非正式书籍借阅失败）、图书漂流角到客户（非正式书籍借阅成功）、客户到借阅处（客户归还借阅书籍）。在客户借阅到期的前五天内，通过图书馆预约信息判定后，客户可以续借30天。</p>
<h4 id="程序UML图-1"><a href="#程序UML图-1" class="headerlink" title="程序UML图"></a>程序UML图</h4><p><img src="/img/loading.gif" data-original="/images/OO/oo第4单元总结/hw4-2UML图.png" alt="hw4-2UML图"></p>
<p>相比于第一次作业，本次作业整体架构并无较大变化。可以观察到，经过重构抽象后，非正式书籍相关操作实现较为简单。如图书漂流角可直接继承<code>Office</code>类，其全部功能均在父类中已经实现，因此可以直接使用。本次作业中，最大改变是将图书馆系统的操作全部提取出来建立<code>Service</code>接口，实例化各种服务类。在<code>System</code>类中建立<code>Service[]</code>数组储存各种服务，在系统使用各项功能时调用服务类即可。</p>
<p><img src="/img/loading.gif" data-original="/images/OO/oo第4单元总结/hw4-2UML状态图.png" alt="hw4-2UML状态图"></p>
<p>本次作业还要求制作书籍的<code>UML</code>状态图。本次画制较为简单，仅做出了初始状态<code>InitState</code>、在图书馆中状态<code>inLibrary</code>、在客户手中状态<code>inCustomer</code>。三种状态的转换方式如图所示，不再过多赘述。</p>
<h4 id="复杂度-1"><a href="#复杂度-1" class="headerlink" title="复杂度"></a>复杂度</h4><p>类复杂度表格如图所示：其中<code>OCavg</code>指代平均操作复杂度，<code>OCmax</code> 指代最大操作复杂度，<code>WMC</code> 指代加权方法复杂度</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Class</th>
<th>OCavg</th>
<th>OCmax</th>
<th>WMC</th>
</tr>
</thead>
<tbody>
<tr>
<td>Main</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>books.Book</td>
<td>1.73</td>
<td><strong>9</strong></td>
<td>19</td>
</tr>
<tr>
<td>books.BookBuffer</td>
<td><strong>2.73</strong></td>
<td>4</td>
<td><strong>41</strong></td>
</tr>
<tr>
<td>informations.Inf</td>
<td>1</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td>libraries.Library</td>
<td>1.87</td>
<td>3</td>
<td><strong>28</strong></td>
</tr>
<tr>
<td>libraries.System</td>
<td><strong>3.17</strong></td>
<td><strong>9</strong></td>
<td>19</td>
</tr>
<tr>
<td>offices.AppointOffice</td>
<td>1.4</td>
<td>3</td>
<td>7</td>
</tr>
<tr>
<td>offices.BorrowOffice</td>
<td>1</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td>offices.CornerOffice</td>
<td>1</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>offices.Office</td>
<td>1</td>
<td>1</td>
<td>9</td>
</tr>
<tr>
<td>offices.ShelfOffice</td>
<td>1</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>services.BorrowService</td>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>services.ContinueService</td>
<td>1.5</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>services.DonateService</td>
<td>1</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>services.OrderService</td>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>services.PickService</td>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>services.QueryService</td>
<td>1.5</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>services.ReturnService</td>
<td>1.5</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>users.Customer</td>
<td>1.67</td>
<td>5</td>
<td>10</td>
</tr>
</tbody>
</table>
</div>
<p>可以观察到，在增加功能后，本次作业复杂度有较高提升，其中<code>System</code>、<code>BookBuffer</code>类复杂度最高。对于<code>System</code>类，其中的<code>run()</code>方法进行<code>command</code>轮询，<code>requestDeal()</code>方法有较多选项的<code>switch</code>语句，选择不同的服务进行调用，因此整体复杂度较高。其余类复杂度正常，得益于程序的模块化分离。</p>
<h3 id="Homework3"><a href="#Homework3" class="headerlink" title="Homework3"></a>Homework3</h3><h4 id="题目重点重述-2"><a href="#题目重点重述-2" class="headerlink" title="题目重点重述"></a>题目重点重述</h4><p>本次作业在第二次作业的基础上，新增了用户的信誉积分功能。用户初始分数为10分，最高为20分，最低无限制。当用户出现按时归还借阅书籍、捐赠书籍、捐赠书籍转正时获得相应加分；出现逾期还书、预约书籍逾期未取等情况时减去相应减分。当用户的信誉积分小于0时，将限制其借阅、预约、续借等服务。同时新增用户信誉积分查询功能，查询单个客户的信誉积分。</p>
<h4 id="程序UML图-2"><a href="#程序UML图-2" class="headerlink" title="程序UML图"></a>程序UML图</h4><p><img src="/img/loading.gif" data-original="/images/OO/oo第4单元总结/hw4-3UML图.png" alt="hw4-3UML图"></p>
<p>UML类图与上一次作业变化不大，主要新增了<code>CreditService</code>服务类。在<code>Book</code>类中新增<code>state</code>属性，表示书籍当前状态，主要是<code>NONE</code>（代表处于图书馆内，没有被预约借阅）、<code>APPOINTED</code>（代表处于预约处，被某位客户预约）、<code>BORROWED</code>（代表被某位客户借阅，处于客户手中），通过新增方法<code>changeState()</code>变换状态。这种改变既可以去除<code>isAppointed</code>、<code>isBorrowed</code>两个属性，整体更加抽象简洁，也可以在未来增加更多书籍状态时更好的拓展。</p>
<p><img src="/img/loading.gif" data-original="/images/OO/oo第4单元总结/hw4-3UML顺序图.png" alt="hw4-3UML顺序图"></p>
<p>本次作业还要求制作书籍的<code>UML</code>顺序图，主要模拟客户预定并获取书籍收发消息的流程。本次画图较为简略，仅制出了两个<code>lifeline</code>作为收发消息的对象，分别是<code>:System</code>和<code>:Customer</code>（<code>:</code>后代表类）。当客户发出预约请求时，系统向客户发送消息<code>orderNewBook()</code>表示已接收到请求，并进行各项操作，将书籍变为可获取的状态；客户获取到书籍后，向系统发送消息<code>getOrderedBook()</code>表示已获得书籍。整体流程较为简单，是一个反馈机制。</p>
<h4 id="复杂度-2"><a href="#复杂度-2" class="headerlink" title="复杂度"></a>复杂度</h4><p>类复杂度表格如图所示：其中<code>OCavg</code>指代平均操作复杂度，<code>OCmax</code> 指代最大操作复杂度，<code>WMC</code> 指代加权方法复杂度</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Class</th>
<th>OCavg</th>
<th>OCmax</th>
<th>WMC</th>
</tr>
</thead>
<tbody>
<tr>
<td>Main</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>books.Book</td>
<td>1.82</td>
<td><strong>10</strong></td>
<td>20</td>
</tr>
<tr>
<td>books.BookBuffer</td>
<td><strong>2.73</strong></td>
<td>4</td>
<td><strong>41</strong></td>
</tr>
<tr>
<td>informations.Inf</td>
<td>1</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td>libraries.Library</td>
<td>1.87</td>
<td>3</td>
<td><strong>28</strong></td>
</tr>
<tr>
<td>libraries.System</td>
<td><strong>2.88</strong></td>
<td><strong>9</strong></td>
<td>23</td>
</tr>
<tr>
<td>offices.AppointOffice</td>
<td>2.33</td>
<td>7</td>
<td>14</td>
</tr>
<tr>
<td>offices.BorrowOffice</td>
<td>1</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td>offices.CornerOffice</td>
<td>1</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>offices.Office</td>
<td>1</td>
<td>1</td>
<td>9</td>
</tr>
<tr>
<td>offices.ShelfOffice</td>
<td>1</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>services.BorrowService</td>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>services.ContinueService</td>
<td>1.5</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>services.CreditService</td>
<td>1</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>services.DonateService</td>
<td>1</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>services.OrderService</td>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>services.PickService</td>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>services.QueryService</td>
<td>1.5</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>services.ReturnService</td>
<td>1.5</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>users.Customer</td>
<td>2</td>
<td>5</td>
<td>20</td>
</tr>
</tbody>
</table>
</div>
<p>可以观察到，相比于第二次作业，本次作业复杂度无显著变化。本次作业改动较少，并未产生过多新方法，同时新增部分中基本没有多项判断和循环，因此并未对复杂度造成太大影响。</p>
<h2 id="二、架构重点实现分析"><a href="#二、架构重点实现分析" class="headerlink" title="二、架构重点实现分析"></a>二、架构重点实现分析</h2><h3 id="Homework1-1"><a href="#Homework1-1" class="headerlink" title="Homework1"></a>Homework1</h3><p>第一次作业程序中主要有三个实现的重点：</p>
<ul>
<li><p><strong>借阅流程的实现：</strong>当顾客进行借阅操作时，首先应该判断书籍是否可以移动，若可以移动则客户携带书籍前往借阅处，并进行进一步审批。借阅处审批顾客是否可以借阅，若可以借阅，则该书籍从<code>shelf</code>删除，并加入客户的<code>books</code>中；如不可以借阅，则该书籍从<code>shelf</code>删除，并加入借阅处的<code>books</code>中。借阅处的操作较为简单，关键在于对客户借阅请求的审批。设计中将该判断分为两部分，分别是书籍是否可以移动以及顾客是否可以借阅。书籍是否移动主要判断<code>shelf</code>中是否有对应剩余的副本，顾客是否可以借阅主要判断<code>customer</code>现在拥有的书籍和借阅请求是否矛盾。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//判断书籍是否可移动（有余本且不是A类书籍），在Shelf类中进行</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canMove</span><span class="params">(LibraryBookId bookId)</span></span><br><span class="line">   {</span><br><span class="line">       <span class="keyword">return</span> books.haveBook(bookId) &amp;&amp; !bookId.isTypeA();</span><br><span class="line">   }</span><br><span class="line">  </span><br><span class="line"><span class="comment">//判断顾客是否可以借阅或预约书籍，在Customer类中进行</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canBorrowOrAppoint</span><span class="params">(LibraryBookId bookId)</span></span><br><span class="line">   {</span><br><span class="line">       <span class="keyword">if</span> (bookId.isTypeB())</span><br><span class="line">       {</span><br><span class="line">           <span class="keyword">return</span> !books.haveBTypeBooks();</span><br><span class="line">       }</span><br><span class="line">       <span class="keyword">else</span> <span class="keyword">if</span> (bookId.isTypeC())</span><br><span class="line">       {</span><br><span class="line">           <span class="keyword">return</span> !books.haveBook(bookId);</span><br><span class="line">       }</span><br><span class="line">       <span class="keyword">else</span></span><br><span class="line">       {</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">       }</span><br><span class="line">   }</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>预约流程的实现：</strong>预约流程主要涉及预约操作、取书操作以及停止营业时书籍的内部调整。设计时为预约处设计了两个属性<code>requests</code>和<code>appoints</code>。<code>requests</code>主要存储审批通过的预约请求，<code>appoints</code>主要存储经过内部调整后运送至预约处的书籍的预约信息。在预约环节，仅审核客户的预约资格，如上所示，所有拥有预约资格的请求都应加入请求池中，等待处理；在转运环节，遍历<code>requests</code>，判断书籍是否可以移动以及当前该客户是否可以预约借阅（当客户在预约后进行其他操作并失去拥有书籍的资格时，如此可以保证当其再获得拥有书籍的资格时，预约请求仍能生效，提高客户<code>picked</code>的成功率），对于书籍可移动且当前该客户可预约借阅的请求，转运书籍，并以当前转运的<code>bookId</code>、<code>customer</code>、<code>date</code>创建新的预约信息，存入<code>appoints</code>中，等待客户取书。当客户取书时，遍历<code>appoints</code>找到为其准备的书籍并删除对应的预约信息。</p>
</li>
<li><p><strong>停止营业阶段的书籍转运：</strong>书籍转运主要有两部分组成，即借阅处与书架区、预约处与书架区的转运。请注意，转运操作无强制逻辑要求，可以自行设计转运方案。但最佳方案应有转运至书架区的操作在转运至预约处的操作前进行，以提高对应书籍转运的成功率以及客户获得书籍的成功率。</p>
<ul>
<li>借阅处与书架区间转运：主要是用户借阅失败以及归还的书籍返回书架区，操作较为简单，将借阅处的<code>books</code>清空，并将返回的集合转运添加至书架区的<code>books</code>中即可。该部分操作放在闭馆时进行，这样的好处是每天借阅处的书籍都能及时返回书架区。</li>
<li>预约处与书架区间转运：主要是用户未取走因到时间而失效的预约书籍返回书架区以及因预约从书架区转运至预约处的书籍。对于预约处返回书架区的书籍，遍历<code>appoints</code>，根据预约信息的<code>date</code>，借助<code>LocalDate</code>类提供的<code>isBefore()</code>方法，判断超时需要返回书架区的书籍。对于因预约从书架区转运至预约处的书籍，遍历<code>requests</code>，判断当前需求对应书籍是否可以移动以及客户是否具备取书资质，符合的进行转运。该部分操作放在开馆时进行，这样的好处是当出现进行预约后数天不开馆的情况时，能空除这段时间延长预约有效周期，提高客户<code>picked</code>的成功率。</li>
</ul>
</li>
</ul>
<h3 id="Homework2-1"><a href="#Homework2-1" class="headerlink" title="Homework2"></a>Homework2</h3><p>第二次作业程序中主要有三个实现重点：</p>
<ul>
<li><p><strong>时间判断：</strong>本次作业中，续借请求审核、还书是否超期等判断均需要进行时间判断。在程序中，主要借助于<code>LocalDate</code>类存储操作的时间日期，在时间判断中，主要借助该类中的<code>plusDays()</code>方法来获得截止日期，借助该类中的<code>isBefore()</code>、<code>isAfter()</code>方法来比较日期大小（需注意<code>isBefore()</code>、<code>isAfter()</code>方法不包含当天，即<code>[2024-10-01].isBefore([2024-10-01])</code>是不成立的）。在<code>Inf</code>类中，实现了不在操作时限内方法<code>overOperationLimit()</code>和不在续借时限内方法<code>overContinueLimit()</code>，如下所示。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//不在操作时限内，主要用于归还是否超时判定和预约是否超时判定</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">overOperationLimit</span><span class="params">(LocalDate now)</span></span><br><span class="line">   {</span><br><span class="line">       <span class="comment">//从opDate后一天开始计算，limit天后无效（不包含opDate+limit当天）</span></span><br><span class="line">       <span class="keyword">return</span> opDate.plusDays(limit).isBefore(now);</span><br><span class="line">   }</span><br><span class="line">  </span><br><span class="line"><span class="comment">//不在续借时限内，主要用于是否处于续借时间判定</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">overContinueLimit</span><span class="params">(LocalDate now)</span></span><br><span class="line">   {</span><br><span class="line">       <span class="comment">//从opDate后一天开始计算，limit-4天内无效（不包含opDate+limit-4当天）</span></span><br><span class="line">       <span class="comment">//从opDate后一天开始计算，limit天后无效（不包含opDate+limit当天）</span></span><br><span class="line">       <span class="keyword">return</span> opDate.plusDays(limit - <span class="number">4</span>).isAfter(now) || opDate.plusDays(limit).isBefore(now);</span><br><span class="line">   }</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>正式书籍与非正式书籍：</strong>本次作业中，建立了正式书籍和非正式书籍两种书籍类型，具有不同操作，存在于不同位置。同时在借阅处归还后进行书籍返还整理时，应对非正式书籍进行升级，转变为正式书籍，仅改变书籍的类型，不改变书籍的序号。在官方包中，给出了<code>LibraryBookId</code>的<code>toFormal()</code>方法。在该方法中，非正式书籍转为正式书籍时，会返回一个新的<code>LibraryBookId</code>对象。这时候会产生两本原本书籍类型序号均相同的非正式书籍（使用同一个<code>LibraryBookId</code>对象）经过转换后不相同（类型序号均相等，但使用两个不同的<code>LibraryBookId</code>对象）的问题，会对后续书籍存储、书籍类型判断产生影响，因此需要重写<code>LibraryBookId</code>类的<code>equals()</code>、<code>hashCode()</code>方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//bookId的toFormal()方法，会产生新对象</span></span><br><span class="line"><span class="keyword">public</span> LibraryBookId <span class="title function_">toFormal</span><span class="params">()</span> </span><br><span class="line">{</span><br><span class="line">       <span class="keyword">switch</span> (<span class="built_in">this</span>.type) </span><br><span class="line">       {</span><br><span class="line">           <span class="keyword">case</span> AU:</span><br><span class="line">               <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LibraryBookId</span>(LibraryBookId.Type.A, <span class="built_in">this</span>.uid);</span><br><span class="line">           <span class="keyword">case</span> BU:</span><br><span class="line">               <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LibraryBookId</span>(LibraryBookId.Type.B, <span class="built_in">this</span>.uid);</span><br><span class="line">           <span class="keyword">case</span> CU:</span><br><span class="line">               <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LibraryBookId</span>(LibraryBookId.Type.C, <span class="built_in">this</span>.uid);</span><br><span class="line">           <span class="keyword">default</span>:</span><br><span class="line">               <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">       }</span><br><span class="line">   }</span><br><span class="line">  </span><br><span class="line"><span class="comment">//重写后的equals()方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object var1)</span> </span><br><span class="line">   {</span><br><span class="line">       <span class="keyword">if</span> (<span class="built_in">this</span> == var1) </span><br><span class="line">       {</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">       } </span><br><span class="line">       <span class="keyword">else</span> <span class="keyword">if</span> (var1 != <span class="literal">null</span> &amp;&amp; <span class="built_in">this</span>.getClass() == var1.getClass()) </span><br><span class="line">       {</span><br><span class="line">           <span class="type">LibraryBookId</span> <span class="variable">var2</span> <span class="operator">=</span> (LibraryBookId)var1;</span><br><span class="line">           <span class="keyword">return</span> <span class="built_in">this</span>.type == var2.type &amp;&amp; Objects.equals(<span class="built_in">this</span>.uid, var2.uid);</span><br><span class="line">       } </span><br><span class="line">       <span class="keyword">else</span> </span><br><span class="line">       {</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">       }</span><br><span class="line">   }</span><br><span class="line">  </span><br><span class="line"><span class="comment">//重写后的hashCode()方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> </span><br><span class="line">   {</span><br><span class="line">       <span class="keyword">return</span> Objects.hash(<span class="keyword">new</span> <span class="title class_">Object</span>[]{<span class="built_in">this</span>.type, <span class="built_in">this</span>.uid});</span><br><span class="line">   }</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>Service</code>接口的实现：</strong>本次作业中，实现了<code>Service</code>的接口，实例化出各种服务，并将其储存在<code>System</code>类中进行调用。<code>Service</code>接口主要实现<code>work()</code>方法，每个实例化的<code>Service</code>内含<code>library</code>属性，并在<code>work()</code>方法中使用。</p>
</li>
</ul>
<h3 id="Homework3-1"><a href="#Homework3-1" class="headerlink" title="Homework3"></a>Homework3</h3><p>第三次作业程序中主要有两个实现重点：</p>
<ul>
<li><strong>借阅超期的扣分机制：</strong>用户每次成功获得书籍，在该书应归还日期的当日闭馆后，若用户仍未归还图书，该用户信用积分减2。请注意，应该在借阅期限当天扣除积分，而不是归还书籍当天扣除。因此在<code>Customer</code>类中新建属性<code>returnBooks</code>表示客户拥有的尚未扣除积分的书籍，在每日结束时对该属性遍历扣除积分，已扣除积分的书籍移除。</li>
<li><strong>整理流程的顺序安排：</strong>按照要求，在闭馆后，应先对借阅超期和预约超期的客户进行分数扣除，再对有捐赠非正式书籍转正的客户进行加分。因此，闭关后整理流程的顺序安排应是：遍历客户，对客户进行借阅逾期积分扣除<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewBox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></g></g></g></svg></mjx-container>整理预约处书籍，对客户预约逾期未取积分扣除，并将书籍返还书架<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewBox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></g></g></g></svg></mjx-container>整理借阅处书籍，对有捐赠非正式书籍转正的客户加分，并将书籍返换书籍和图书漂流角<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewBox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></g></g></g></svg></mjx-container>整理书架，按照预约请求将书籍运送至预约处。</li>
</ul>
<h2 id="三、Bug分析及程序优化"><a href="#三、Bug分析及程序优化" class="headerlink" title="三、Bug分析及程序优化"></a>三、Bug分析及程序优化</h2><h3 id="Homework1-2"><a href="#Homework1-2" class="headerlink" title="Homework1"></a>Homework1</h3><h4 id="Bug分析"><a href="#Bug分析" class="headerlink" title="Bug分析"></a>Bug分析</h4><p>本次作业暂无bug。</p>
<h4 id="优化策略"><a href="#优化策略" class="headerlink" title="优化策略"></a>优化策略</h4><p>本次作业对性能要求较低，暂无优化策略。</p>
<h3 id="Homework2-2"><a href="#Homework2-2" class="headerlink" title="Homework2"></a>Homework2</h3><h4 id="Bug分析-1"><a href="#Bug分析-1" class="headerlink" title="Bug分析"></a>Bug分析</h4><p>本次作业暂无bug。</p>
<h4 id="优化策略-1"><a href="#优化策略-1" class="headerlink" title="优化策略"></a>优化策略</h4><p>本次作业对性能要求较低，暂无优化策略。</p>
<h3 id="Homework3-2"><a href="#Homework3-2" class="headerlink" title="Homework3"></a>Homework3</h3><h4 id="Bug分析-2"><a href="#Bug分析-2" class="headerlink" title="Bug分析"></a>Bug分析</h4><p>本次作业暂无bug。</p>
<h4 id="优化策略-2"><a href="#优化策略-2" class="headerlink" title="优化策略"></a>优化策略</h4><p>本次作业对性能要求较低，暂无优化策略。</p>
<h2 id="四、心得体会"><a href="#四、心得体会" class="headerlink" title="四、心得体会"></a>四、心得体会</h2><p>在学习过前三个单元后，第四个单元迎来了完全自由的代码框架设计。不得不说，经过前三个单元的魔鬼训练，笔者学到了许多理念与思想，并运用在了本单元中，比如说本单元中的核心类<code>BookBuffer</code>类，就是参考第二单元中的<code>RequestQueue</code>类进行设计的。同时，按照相像性设计了<code>Office</code>类和<code>Service</code>接口，将一些类进行抽象，并将其存储在<code>System</code>的数组中，可以实现更进一步的方法抽象。</p>
<p>那么心得体会部分就主要谈谈这单元完成之后的一些收获和经验吧：</p>
<ul>
<li><strong>架构设计的重要性。</strong>好的，这已经是第四遍了。相较于第三单元，本单元实现难度大幅降低，设计自由度大幅提高。好的设计逻辑更加鲜明，实现更加抽象，复用性更高。</li>
<li><strong>各类语言的阅读能力。</strong> 第三单元作业出现了<code>JML</code>语言，本单元作业中出现了<code>UML</code>语言。<code>UML</code>语言可视化程度高，阅读更加清晰明白。但是<code>starUML</code>从头构建<code>UML</code>图确实是一件繁琐的事情，耗费大量时间。同时，正常来说，<code>UML</code>图的设计应在程序设计最开始进行，但是在真正实现时，会发现很多细节都有瑕疵，需要不停修改，较为难办。</li>
<li><strong>测试的重要性。</strong> 在第三单元中，最重要的是程序测试，本单元中同样重要。本单元中，由于服务种类众多，组合出很多种情况，又存在如信誉积分这种影响全局的属性，因此需要进行详尽的测试。</li>
</ul>
<p>至于对课程的建议，就留到期末总结中说吧。</p>
<p>最后，还是要感谢助教wwr学长的帮助。也希望在之后的学习中能再接再厉，继续进步。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">Mr-MysteryMan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2025/02/10/OO/2024%E6%98%A5-OO%E8%AF%BE%E7%A8%8BUnit4%E6%80%BB%E7%BB%93/">http://example.com/2025/02/10/OO/2024春-OO课程Unit4总结/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://example.com" target="_blank">ENIGMA</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a></div><div class="post-share"><div class="social-share" data-image="/img/wuhui/10.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/02/10/OO/2024%E6%98%A5-OO%E8%AF%BE%E7%A8%8BUnit3%E6%80%BB%E7%BB%93/" title="面向对象课程Unit3总结"><img class="cover" src="/img/loading.gif" data-original="/img/wuhui/8.png" onerror="onerror=null;src='/img/footer.jpeg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">面向对象课程Unit3总结</div></div><div class="info-2"><div class="info-item-1">...</div></div></div></a><a class="pagination-related" href="/2025/02/10/OO/2024%E6%98%A5-OO%E8%AF%BE%E7%A8%8B%E6%80%BB%E7%BB%93/" title="面向对象课程总结"><img class="cover" src="/img/loading.gif" data-original="/img/wuhui/19.jpg" onerror="onerror=null;src='/img/footer.jpeg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">面向对象课程总结</div></div><div class="info-2"><div class="info-item-1">架构设计思维演进经过整个课程四个单元迭代式的学习演进，笔者在架构设计方面学到了很多，最重要的应该是分离式、模块化、层次化、安全性设计。现进行一定的记录： 第一单元 字符串解析的简单计算器实现 递归下降法设计：递归下降法是将原对象分为多个层次，每个层次相互独立处理，将本层次划分为多个下一层次的元素，并进入下一个层次进行处理。在第一单元中表现为原式分为多项式、单项式、因子，按照+/-将多项式拆分为单项式，按照*将单项式分为因子，在因子层面，如果因子带有()则按照多项式处理（这就会出现多项式类继承因子类的行为）。 分离式设计：分离式设计应该是面向对象设计思想中极为重要的一点。这种思想有多种含义，包括程序功能模块化设计（如本单元中字符串解析为各个元素与字符串中元素计算功能分离）、层次化设计（如本单元中分为多项式、单项式、因子，后面可能还有更多层次，各个层次相互分离）等。  第二单元...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/02/10/OO/2024%E6%98%A5-OO%E8%AF%BE%E7%A8%8BUnit1%E6%80%BB%E7%BB%93/" title="面向对象课程Unit1总结"><img class="cover" src="/img/loading.gif" data-original="/img/wuhui/7.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-02-10</div><div class="info-item-2">面向对象课程Unit1总结</div></div><div class="info-2"><div class="info-item-1">...</div></div></div></a><a class="pagination-related" href="/2025/02/10/OO/2024%E6%98%A5-OO%E8%AF%BE%E7%A8%8B%E6%80%BB%E7%BB%93/" title="面向对象课程总结"><img class="cover" src="/img/loading.gif" data-original="/img/wuhui/19.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-02-10</div><div class="info-item-2">面向对象课程总结</div></div><div class="info-2"><div class="info-item-1">架构设计思维演进经过整个课程四个单元迭代式的学习演进，笔者在架构设计方面学到了很多，最重要的应该是分离式、模块化、层次化、安全性设计。现进行一定的记录： 第一单元 字符串解析的简单计算器实现 递归下降法设计：递归下降法是将原对象分为多个层次，每个层次相互独立处理，将本层次划分为多个下一层次的元素，并进入下一个层次进行处理。在第一单元中表现为原式分为多项式、单项式、因子，按照+/-将多项式拆分为单项式，按照*将单项式分为因子，在因子层面，如果因子带有()则按照多项式处理（这就会出现多项式类继承因子类的行为）。 分离式设计：分离式设计应该是面向对象设计思想中极为重要的一点。这种思想有多种含义，包括程序功能模块化设计（如本单元中字符串解析为各个元素与字符串中元素计算功能分离）、层次化设计（如本单元中分为多项式、单项式、因子，后面可能还有更多层次，各个层次相互分离）等。  第二单元...</div></div></div></a><a class="pagination-related" href="/2025/02/10/OO/2024%E6%98%A5-OO%E8%AF%BE%E7%A8%8BUnit3%E6%80%BB%E7%BB%93/" title="面向对象课程Unit3总结"><img class="cover" src="/img/loading.gif" data-original="/img/wuhui/8.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-02-10</div><div class="info-item-2">面向对象课程Unit3总结</div></div><div class="info-2"><div class="info-item-1">...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading.gif" data-original="/img/avatar.png" onerror="this.onerror=null;this.src='/img/logo.png'" alt="avatar"/></div><div class="author-info-name">Mr-MysteryMan</div><div class="author-info-description">广告位招租</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Mr-MysteryMan"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Mr-MysteryMan" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://blog.csdn.net/" target="_blank" title="CSDN"><i class="fa fa-book-open"></i></a><a class="social-icon" href="mailto:1234567@qq.com" target="_blank" title="Email"><i class="fas fa-envelope-open-text"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%BD%9C%E4%B8%9A%E6%9E%B6%E6%9E%84%E5%88%86%E6%9E%90"><span class="toc-number">2.</span> <span class="toc-text">一、作业架构分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Homework1"><span class="toc-number">2.1.</span> <span class="toc-text">Homework1</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E9%87%8D%E7%82%B9%E9%87%8D%E8%BF%B0"><span class="toc-number">2.1.1.</span> <span class="toc-text">题目重点重述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8FUML%E5%9B%BE"><span class="toc-number">2.1.2.</span> <span class="toc-text">程序UML图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E5%BA%A6"><span class="toc-number">2.1.3.</span> <span class="toc-text">复杂度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E6%9E%84"><span class="toc-number">2.1.4.</span> <span class="toc-text">重构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Homework2"><span class="toc-number">2.2.</span> <span class="toc-text">Homework2</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E9%87%8D%E7%82%B9%E9%87%8D%E8%BF%B0-1"><span class="toc-number">2.2.1.</span> <span class="toc-text">题目重点重述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8FUML%E5%9B%BE-1"><span class="toc-number">2.2.2.</span> <span class="toc-text">程序UML图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E5%BA%A6-1"><span class="toc-number">2.2.3.</span> <span class="toc-text">复杂度</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Homework3"><span class="toc-number">2.3.</span> <span class="toc-text">Homework3</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E9%87%8D%E7%82%B9%E9%87%8D%E8%BF%B0-2"><span class="toc-number">2.3.1.</span> <span class="toc-text">题目重点重述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8FUML%E5%9B%BE-2"><span class="toc-number">2.3.2.</span> <span class="toc-text">程序UML图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E5%BA%A6-2"><span class="toc-number">2.3.3.</span> <span class="toc-text">复杂度</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%9E%B6%E6%9E%84%E9%87%8D%E7%82%B9%E5%AE%9E%E7%8E%B0%E5%88%86%E6%9E%90"><span class="toc-number">3.</span> <span class="toc-text">二、架构重点实现分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Homework1-1"><span class="toc-number">3.1.</span> <span class="toc-text">Homework1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Homework2-1"><span class="toc-number">3.2.</span> <span class="toc-text">Homework2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Homework3-1"><span class="toc-number">3.3.</span> <span class="toc-text">Homework3</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81Bug%E5%88%86%E6%9E%90%E5%8F%8A%E7%A8%8B%E5%BA%8F%E4%BC%98%E5%8C%96"><span class="toc-number">4.</span> <span class="toc-text">三、Bug分析及程序优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Homework1-2"><span class="toc-number">4.1.</span> <span class="toc-text">Homework1</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Bug%E5%88%86%E6%9E%90"><span class="toc-number">4.1.1.</span> <span class="toc-text">Bug分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E7%AD%96%E7%95%A5"><span class="toc-number">4.1.2.</span> <span class="toc-text">优化策略</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Homework2-2"><span class="toc-number">4.2.</span> <span class="toc-text">Homework2</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Bug%E5%88%86%E6%9E%90-1"><span class="toc-number">4.2.1.</span> <span class="toc-text">Bug分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E7%AD%96%E7%95%A5-1"><span class="toc-number">4.2.2.</span> <span class="toc-text">优化策略</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Homework3-2"><span class="toc-number">4.3.</span> <span class="toc-text">Homework3</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Bug%E5%88%86%E6%9E%90-2"><span class="toc-number">4.3.1.</span> <span class="toc-text">Bug分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E7%AD%96%E7%95%A5-2"><span class="toc-number">4.3.2.</span> <span class="toc-text">优化策略</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%BF%83%E5%BE%97%E4%BD%93%E4%BC%9A"><span class="toc-number">5.</span> <span class="toc-text">四、心得体会</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/03/17/Compiler/%E7%BC%96%E8%AF%91%E5%99%A8%E8%AE%BE%E8%AE%A1%E6%96%87%E6%A1%A3/" title="编译器设计文档"><img src="/img/loading.gif" data-original="/img/wuhui/8.png" onerror="this.onerror=null;this.src='/img/footer.jpeg'" alt="编译器设计文档"/></a><div class="content"><a class="title" href="/2025/03/17/Compiler/%E7%BC%96%E8%AF%91%E5%99%A8%E8%AE%BE%E8%AE%A1%E6%96%87%E6%A1%A3/" title="编译器设计文档">编译器设计文档</a><time datetime="2025-03-17T14:00:00.000Z" title="发表于 2025-03-17 22:00:00">2025-03-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/16/Algorithm/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/" title="算法设计知识点整理"><img src="/img/loading.gif" data-original="/img/wuhui/15.jpeg" onerror="this.onerror=null;this.src='/img/footer.jpeg'" alt="算法设计知识点整理"/></a><div class="content"><a class="title" href="/2025/03/16/Algorithm/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/" title="算法设计知识点整理">算法设计知识点整理</a><time datetime="2025-03-16T14:00:00.000Z" title="发表于 2025-03-16 22:00:00">2025-03-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/16/Algorithm/%E7%AE%97%E6%B3%95%E7%AC%AC4%E6%AC%A1%E4%BD%9C%E4%B8%9A/" title="算法第4次作业"><img src="/img/loading.gif" data-original="/img/wuhui/1.png" onerror="this.onerror=null;this.src='/img/footer.jpeg'" alt="算法第4次作业"/></a><div class="content"><a class="title" href="/2025/03/16/Algorithm/%E7%AE%97%E6%B3%95%E7%AC%AC4%E6%AC%A1%E4%BD%9C%E4%B8%9A/" title="算法第4次作业">算法第4次作业</a><time datetime="2025-03-16T06:00:00.000Z" title="发表于 2025-03-16 14:00:00">2025-03-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/16/Algorithm/%E7%AE%97%E6%B3%95%E7%AC%AC3%E6%AC%A1%E4%BD%9C%E4%B8%9A/" title="算法第3次作业"><img src="/img/loading.gif" data-original="/img/wuhui/3.png" onerror="this.onerror=null;this.src='/img/footer.jpeg'" alt="算法第3次作业"/></a><div class="content"><a class="title" href="/2025/03/16/Algorithm/%E7%AE%97%E6%B3%95%E7%AC%AC3%E6%AC%A1%E4%BD%9C%E4%B8%9A/" title="算法第3次作业">算法第3次作业</a><time datetime="2025-03-16T04:00:00.000Z" title="发表于 2025-03-16 12:00:00">2025-03-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/16/Algorithm/%E7%AE%97%E6%B3%95%E7%AC%AC2%E6%AC%A1%E4%BD%9C%E4%B8%9A/" title="算法第2次作业"><img src="/img/loading.gif" data-original="/img/wuhui/8.png" onerror="this.onerror=null;this.src='/img/footer.jpeg'" alt="算法第2次作业"/></a><div class="content"><a class="title" href="/2025/03/16/Algorithm/%E7%AE%97%E6%B3%95%E7%AC%AC2%E6%AC%A1%E4%BD%9C%E4%B8%9A/" title="算法第2次作业">算法第2次作业</a><time datetime="2025-03-16T02:00:00.000Z" title="发表于 2025-03-16 10:00:00">2025-03-16</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/footer2.jpeg);"><div id="footer-wrap"><div class="copyright">&copy;2025 By Mr-MysteryMan</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div><div class="footer_custom_text"><span id="runtime"></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const loadMathjax = () => {
    if (!window.MathJax) {
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          tags: 'none',
        },
        chtml: {
          scale: 1.1
        },
        options: {
          enableMenu: true,
          renderActions: {
            findScript: [10, doc => {
              for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                const display = !!node.type.match(/; *mode=display/)
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
                const text = document.createTextNode('')
                node.parentNode.replaceChild(text, node)
                math.start = {node: text, delim: '', n: 0}
                math.end = {node: text, delim: '', n: 0}
                doc.math.push(math)
              }
            }, '']
          }
        }
      }

      const script = document.createElement('script')
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
      script.id = 'MathJax-script'
      script.async = true
      document.head.appendChild(script)
    } else {
      MathJax.startup.document.state(0)
      MathJax.texReset()
      MathJax.typesetPromise()
    }
  }

  btf.addGlobalFn('encrypt', loadMathjax, 'mathjax')
  window.pjax ? loadMathjax() : window.addEventListener('load', loadMathjax)
})()</script></div><script src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script src="/js/flipcountdown.js"></script><script data-pjax src="/js/runtime.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="true" data-text="富强,民主,文明,和谐,平等,公正,法治,爱国,敬业,诚信,友善" data-fontsize="15px" data-random="true" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div>
        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z\d\-\.\+]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(t.test(e.href)||r.test(e.href))&&(e.href=a.dataset.original)})});</script><script>(r=>{r.imageLazyLoadSetting.processImages=t;var a=r.imageLazyLoadSetting.isSPA,o=r.imageLazyLoadSetting.preloadRatio||1,d=i();function i(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(t){(a||t)&&(d=i());for(var e,n=0;n<d.length;n++)0<=(e=(e=d[n]).getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(r.innerHeight*o||document.documentElement.clientHeight*o)&&(()=>{var t,e,a,o,i=d[n];e=function(){d=d.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).dataset.loaded||(t.hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(a=new Image,o=t.getAttribute("data-original"),a.onload=function(){t.src=o,t.removeAttribute("data-original"),t.setAttribute("data-loaded",!0),e&&e()},a.onerror=function(){t.removeAttribute("data-original"),t.setAttribute("data-loaded",!1),t.src=o},t.src!==o&&(a.src=o)))})()}function e(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",e),r.addEventListener("resize",e),r.addEventListener("orientationchange",e)})(this);</script></body></html>